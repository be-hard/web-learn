### TCP的三次握手
TCP三次握手本质是为了确定通信的双方既有发的能力又有收的能力，同时对初始序列进行确定。
第一次握手是客户端向服务端发送连接请求，即发送SYN=1,seq=x的数据包到服务器。告诉服务端它有发送的能力
第二次握手是服务端收到请求后回复ACK报文，同意连接请求，即返回SYN=1,ACK=x+1,seq=y的响应包。即告诉客户端它既有收的能力又有发送的能力。
第三次握手是客户端收到响应后再回复ACK报文，即发送ACK=y+1,seq=z的数据包，告诉服务端它有接收的能力。
ACK：确认标志，用于表示对数据包的成功接收
SYN：同步标志 表示TCP连接已初始化。

#### 为什么一定要三次握手不能两次呢？
如果是两次握手，服务端两次握手后就认为已经建立了连接，已经在开始发送数据分组，而如果服务端在第二次握手返回的回复报文中因为网络等问题不能传送到客户端，客户端会认为连接还没建立，会一直等待服务端的回复报文，而拒绝接受数据分组。服务端又因为数据分组超时进行重传，这样造成了死锁。

### TCP四次挥手
1.客户端发送断开连接请求，即FIN报文
2.服务端收到请求后回复ACK报文，告诉客户端收到请求，但还没有准备好
3.客户端收到ACK报文后进入FIN_WAIT状态，等待服务端发送FIN报文
4.服务端确定数据发送完毕后，发送FIN报文给客户端
5.客户端收到FIN报文后，返回ACK报文，进入TIME_WAIT状态，等待两个最大报文时间，在这个期间中如果收到服务端发送的FIN报文，说明服务端没有收到ACK报文，所以客户端会重新发送ACK报文，并重新计时。如果等待期间没有收到服务端的报文，说明服务端已断开连接，客户端也会关闭自己的连接。
6.服务端收到ACK报文后，断开连接。